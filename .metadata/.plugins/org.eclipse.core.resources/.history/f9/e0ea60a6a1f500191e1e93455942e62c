/**
 * PresupuestoServiceSkeleton.java
 *
 * This file was auto-generated from WSDL
 * by the Apache Axis2 version: 1.7.9  Built on : Nov 16, 2018 (12:05:37 GMT)
 */
package com.soa;

import java.rmi.RemoteException;

import com.buro.BuroServiceStub;
import com.buro.BuroServiceStub.ConsultarBuroRequest;
import com.buro.BuroServiceStub.ConsultarBuroResponse;

/**
 *  PresupuestoServiceSkeleton java skeleton for the axisService
 */
public class PresupuestoServiceSkeleton {
    /**
     * Auto generated method signature
     *
     * @param presupuestoRequest
     * @return presupuestoResponse
     */
    public com.soa.PresupuestoResponse presupuestoOperation(
        com.soa.PresupuestoRequest presupuestoRequest) {
    	PresupuestoResponse response = new PresupuestoResponse();
    	//Logica de los Dao para obtener el folio(id) generado por la DB//
    	//y mandarlo por parametro a la request del Buro//
    	boolean aceptado = wasAccept( 1001);
    	System.out.println( "Su estatus de su credito fue: " +  aceptado);
    	if( aceptado)
    	{
    		response.setFolio( 1001);
    	}
    	return response;
    	
    }
    private boolean wasAccept( int folio) {
    	try 
    	{
    		BuroServiceStub buroStub = new BuroServiceStub();
        	ConsultarBuroRequest requestBuro = new ConsultarBuroRequest();
        	requestBuro.setId_folio( folio);
			ConsultarBuroResponse responseBuro = buroStub.buroOperation( requestBuro);
			System.out.println( "Peticion hecha con exito");
			return  responseBuro.getAprobado();
		} 
    	catch (RemoteException e) 
    	{
			e.printStackTrace();
			System.out.println( "Hubo un error en la conexion");
			return false;
		}
    }
}
